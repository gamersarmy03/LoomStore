<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Console - LoomStore</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #ffffff;
        }
        .admin-card {
            background-color: #1a1a1a;
            border: 1px solid #2a2a2a;
        }
        .btn-approve {
            background-color: #22c55e;
            color: white;
        }
        .btn-approve:hover {
            background-color: #16a34a;
        }
        .btn-reject {
            background-color: #ef4444;
            color: white;
        }
        .btn-reject:hover {
            background-color: #dc2626;
        }
    </style>
</head>
<body class="bg-black">

    <header class="p-4 md:p-6 flex justify-between items-center border-b border-gray-800">
        <h1 class="text-3xl font-bold text-white">Admin <span class="text-purple-500">Console</span></h1>
        <a href="main.html" class="text-white font-semibold px-4 py-2 rounded-lg border border-purple-500 hover:bg-purple-500 transition-colors">
            Back to Store
        </a>
    </header>

    <main class="p-4 md:p-8">
        <h2 class="text-2xl font-bold mb-6">Pending Submissions</h2>
        <div id="submissions-container" class="space-y-6">
            <!-- Submission cards will be dynamically inserted here -->
        </div>
         <div id="no-submissions" class="hidden text-center py-20">
            <h2 class="text-2xl font-semibold text-gray-400">No pending submissions.</h2>
            <p class="text-gray-500">All caught up!</p>
        </div>
    </main>

    <script>
        // Mock data for demonstration
        const mockSubmissions = [
            {
                id: '1',
                appName: 'Creative Suite',
                appLogoUrl: 'https://placehold.co/128x128/a020f0/ffffff?text=C',
                shortDescription: 'A new way to be creative.',
                longDescription: 'This suite includes a photo editor, video editor, and a drawing tool. All you need for your creative projects.',
                appCategory: 'Productivity',
                distributionMethod: 'apk',
                websiteUrl: null,
                apkUrl: 'files/creative-suite.apk',
                developerName: 'Creative Inc.',
                submissionDate: new Date().toISOString(),
                status: 'pending'
            },
            {
                id: '2',
                appName: 'SocialConnect',
                appLogoUrl: 'https://placehold.co/128x128/a020f0/ffffff?text=S',
                shortDescription: 'Connect with friends.',
                longDescription: 'A decentralized social media platform that respects your privacy.',
                appCategory: 'Social',
                distributionMethod: 'website',
                websiteUrl: 'https://socialconnect.example.com',
                apkUrl: null,
                developerName: 'Privacy First',
                submissionDate: new Date().toISOString(),
                status: 'pending'
            }
        ];

        const submissionsContainer = document.getElementById('submissions-container');
        const noSubmissionsMessage = document.getElementById('no-submissions');

        function renderSubmissions(submissions) {
            submissionsContainer.innerHTML = '';
            const pendingSubmissions = submissions.filter(s => s.status === 'pending');
            
            if (pendingSubmissions.length === 0) {
                noSubmissionsMessage.classList.remove('hidden');
            } else {
                 noSubmissionsMessage.classList.add('hidden');
            }

            pendingSubmissions.forEach(sub => {
                const card = document.createElement('div');
                card.id = `submission-${sub.id}`;
                card.className = 'admin-card rounded-lg p-6 shadow-md flex flex-col md:flex-row gap-6';

                card.innerHTML = `
                    <div class="flex-shrink-0">
                        <img class="w-24 h-24 rounded-lg" src="${sub.appLogoUrl}" alt="${sub.appName} Logo" onerror="this.src='https://placehold.co/128x128/1a1a1a/ffffff?text=Error'">
                    </div>
                    <div class="flex-grow">
                        <h3 class="text-xl font-bold">${sub.appName}</h3>
                        <p class="text-sm text-gray-400 mb-2">by ${sub.developerName} | Category: ${sub.appCategory}</p>
                        <p class="mb-1"><strong>Short Desc:</strong> ${sub.shortDescription}</p>
                        <p class="mb-4 text-gray-300"><strong>Long Desc:</strong> ${sub.longDescription}</p>
                        
                        ${sub.distributionMethod === 'website' ?
                            `<p><strong>Website:</strong> <a href="${sub.websiteUrl}" target="_blank" class="text-purple-400 hover:underline">${sub.websiteUrl}</a></p>` :
                            `<p><strong>APK:</strong> <span class="text-gray-300">${sub.apkUrl}</span></p>`
                        }
                         ${sub.apkUrl === null ? 
                            `<div class="mt-4">
                                <label for="apkUpload-${sub.id}" class="text-sm font-medium">Upload APK for Approval:</label>
                                <input type="file" id="apkUpload-${sub.id}" class="mt-1 text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"/>
                            </div>` : ''
                        }
                    </div>
                    <div class="flex flex-col space-y-3 justify-center">
                        <button class="btn-approve font-semibold px-4 py-2 rounded-lg" onclick="handleApprove('${sub.id}')">Approve</button>
                        <button class="btn-reject font-semibold px-4 py-2 rounded-lg" onclick="handleReject('${sub.id}')">Reject</button>
                    </div>
                `;
                submissionsContainer.appendChild(card);
            });
        }

        function handleApprove(id) {
            console.log(`Approving app ${id}`);
            // In a real app, update status in Appwrite
            // and potentially upload the APK if provided by admin.
            const card = document.getElementById(`submission-${id}`);
            card.style.opacity = '0.5';
            card.innerHTML += '<p class="text-center font-bold text-green-400 mt-4">Approved</p>';
            setTimeout(() => card.remove(), 1000);
        }

        function handleReject(id) {
            console.log(`Rejecting app ${id}`);
             // In a real app, update status in Appwrite
            const card = document.getElementById(`submission-${id}`);
            card.style.opacity = '0.5';
            card.innerHTML += '<p class="text-center font-bold text-red-400 mt-4">Rejected</p>';
            setTimeout(() => card.remove(), 1000);
        }

        // Initial render
        renderSubmissions(mockSubmissions);
    </script>
</body>
</html>
