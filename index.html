<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoomStore</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="navbar">
        <div class="container">
            <div class="logo">
                <h1>LoomStore</h1>
            </div>
            <nav class="nav-links">
                <ul>
                    <li><a href="#" class="active">Home</a></li>
                    <li><a href="#">Categories</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Support</a></li>
                </ul>
            </nav>
            <div class="header-buttons">
                <button class="developer-btn">Developer</button>
                <span class="mobile-menu-icon"><i class="fas fa-bars"></i></span>
            </div>
        </div>
    </header>

    <div class="mobile-nav-overlay">
        <span class="close-icon"><i class="fas fa-times"></i></span>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Categories</a></li>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Support</a></li>
            <li><a href="#" class="developer-mobile">Developer</a></li>
        </ul>
    </div>

    <main class="main-content">
        <section class="hero-section fade-in">
            <h2>Discover Amazing Apps & Creative Tools</h2>
            <p>Unleash your potential with LoomStore's curated collection.</p>
            <div class="search-bar">
                <input type="text" placeholder="Search apps...">
                <button><i class="fas fa-search"></i></button>
            </div>
        </section>

        <section class="app-grid-section fade-in">
            <h3>Featured Apps</h3>
            <div class="app-grid">
                <div class="app-card slide-up">
                    <div class="app-icon"><i class="fas fa-paint-brush"></i></div>
                    <h4>LoomCreator</h4>
                    <span class="app-category">Design & Graphics</span>
                    <p class="app-description">Intuitive design tool for stunning visuals.</p>
                    <div class="app-rating"><i class="fas fa-star"></i> 4.8</div>
                    <button class="get-btn">Get</button>
                </div>
                <div class="app-card slide-up">
                    <div class="app-icon"><i class="fas fa-music"></i></div>
                    <h4>AudioWeave</h4>
                    <span class="app-category">Music & Audio</span>
                    <p class="app-description">Create and mix professional audio tracks.</p>
                    <div class="app-rating"><i class="fas fa-star"></i> 4.5</div>
                    <button class="get-btn">Get</button>
                </div>
                <div class="app-card slide-up">
                    <div class="app-icon"><i class="fas fa-code"></i></div>
                    <h4>CodeSphere</h4>
                    <span class="app-category">Developer Tools</span>
                    <p class="app-description">Powerful IDE for modern web development.</p>
                    <div class="app-rating"><i class="fas fa-star"></i> 4.9</div>
                    <button class="get-btn">Get</button>
                </div>
                <div class="app-card slide-up">
                    <div class="app-icon"><i class="fas fa-robot"></i></div>
                    <h4>StoryTeller AI</h4>
                    <span class="app-category">Writing & AI</span>
                    <p class="app-description">AI-powered assistant for creative writing.</p>
                    <div class="app-rating"><i class="fas fa-star"></i> 4.7</div>
                    <button class="get-btn">Get</button>
                </div>
                <div class="app-card slide-up">
                    <div class="app-icon"><i class="fas fa-gamepad"></i></div>
                    <h4>PixelPlay</h4>
                    <span class="app-category">Gaming</span>
                    <p class="app-description">Classic arcade games reimagined.</p>
                    <div class="app-rating"><i class="fas fa-star"></i> 4.6</div>
                    <button class="get-btn">Get</button>
                </div>
                <div class="app-card slide-up">
                    <div class="app-icon"><i class="fas fa-heartbeat"></i></div>
                    <h4>HealthFlow</h4>
                    <span class="app-category">Health & Fitness</span>
                    <p class="app-description">Track your fitness journey and well-being.</p>
                    <div class="app-rating"><i class="fas fa-star"></i> 4.2</div>
                    <button class="get-btn">Get</button>
                </div>
            </div>
        </section>

        <section class="browse-categories fade-in">
            <h3>Browse by Categories</h3>
            <div class="categories-grid">
                <a href="#" class="category-card slide-up"><i class="fas fa-paint-brush"></i><span>Design</span></a>
                <a href="#" class="category-card slide-up"><i class="fas fa-video"></i><span>Video Editing</span></a>
                <a href="#" class="category-card slide-up"><i class="fas fa-book"></i><span>Education</span></a>
                <a href="#" class="category-card slide-up"><i class="fas fa-dollar-sign"></i><span>Finance</span></a>
                <a href="#" class="category-card slide-up"><i class="fas fa-utensils"></i><span>Food & Drink</span></a>
                <a href="#" class="category-card slide-up"><i class="fas fa-puzzle-piece"></i><span>Puzzles</span></a>
            </div>
        </section>
    </main>

    <footer class="footer fade-in">
        <div class="container">
            <div class="footer-columns">
                <div class="footer-col">
                    <h4>LoomStore</h4>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Developers</h4>
                    <ul>
                        <li><a href="#">Developer Portal</a></li>
                        <li><a href="#">API Documentation</a></li>
                        <li><a href="#">Submit Your App</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Connect</h4>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Â© 2025 LoomStore. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <div class="modal" id="developer-modal">
        <div class="modal-content fade-in">
            <span class="close-button">&times;</span>
            <h2>Submit Your App to LoomStore</h2>
            <form id="app-submit-form">
                <div class="form-group">
                    <label for="app-name">App Name:</label>
                    <input type="text" id="app-name" name="app-name" required>
                </div>
                <div class="form-group">
                    <label for="app-logo">App Logo (Square format, PNG/JPG):</label>
                    <input type="file" id="app-logo" name="app-logo" accept="image/png, image/jpeg" required>
                    <div class="image-preview" id="logo-preview"></div>
                </div>
                <div class="form-group">
                    <label for="short-desc">Short Description (max 100 letters):</label>
                    <textarea id="short-desc" name="short-desc" maxlength="100" required></textarea>
                    <div class="char-count" id="short-desc-count">0/100</div>
                </div>
                <div class="form-group">
                    <label for="full-desc">Full Description (max 400 letters):</label>
                    <textarea id="full-desc" name="full-desc" maxlength="400" required></textarea>
                    <div class="char-count" id="full-desc-count">0/400</div>
                </div>
                <div class="form-group">
                    <label for="app-images">App Screenshots (Min 2, Max 5, 16:9 or 9:16, PNG/JPG):</label>
                    <input type="file" id="app-images" name="app-images" accept="image/png, image/jpeg" multiple required>
                    <div class="image-preview-container" id="images-preview"></div>
                </div>
                <div class="form-group">
                    <label for="category">Category:</label>
                    <select id="category" name="category" required>
                        <option value="">-- Select a Category --</option>
                        <option value="Design & Graphics">Design & Graphics</option>
                        <option value="Music & Audio">Music & Audio</option>
                        <option value="Developer Tools">Developer Tools</option>
                        <option value="Writing & AI">Writing & AI</option>
                        <option value="Gaming">Gaming</option>
                        <option value="Health & Fitness">Health & Fitness</option>
                        <option value="Video Editing">Video Editing</option>
                        <option value="Education">Education</option>
                        <option value="Finance">Finance</option>
                        <option value="Food & Drink">Food & Drink</option>
                        <option value="Puzzles">Puzzles</option>
                        <option value="Utilities">Utilities</option>
                        <option value="Lifestyle">Lifestyle</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>App Distribution:</label>
                    <div class="radio-group">
                        <input type="radio" id="url" name="distribution" value="url" checked>
                        <label for="url">Provide Website URL</label>
                        <input type="radio" id="apk" name="distribution" value="apk">
                        <label for="apk">Upload APK</label>
                    </div>
                </div>
                <div class="form-group" id="url-group">
                    <label for="website-url">Website URL:</label>
                    <input type="url" id="website-url" name="website-url">
                </div>
                <div class="form-group" id="apk-group" style="display: none;">
                    <label for="apk-file">Upload APK File:</label>
                    <input type="file" id="apk-file" name="apk-file" accept=".apk">
                </div>
                <div class="form-group">
                    <label for="dev-name">Developer Name (Visible):</label>
                    <input type="text" id="dev-name" name="dev-name" required>
                </div>
                <div class="form-group">
                    <label for="dev-email">Developer Email (Private):</label>
                    <input type="email" id="dev-email" name="dev-email" required>
                </div>
                <button type="submit" class="submit-btn">Submit App for Review</button>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Mobile Menu Toggle
            const mobileMenuIcon = document.querySelector('.mobile-menu-icon');
            const mobileNavOverlay = document.querySelector('.mobile-nav-overlay');
            const closeIcon = document.querySelector('.close-icon');
            mobileMenuIcon.addEventListener('click', () => mobileNavOverlay.classList.toggle('open'));
            closeIcon.addEventListener('click', () => mobileNavOverlay.classList.remove('open'));

            // Developer Modal
            const developerBtn = document.querySelector('.developer-btn');
            const modal = document.getElementById('developer-modal');
            const closeBtn = modal.querySelector('.close-button');
            developerBtn.addEventListener('click', () => modal.style.display = 'flex');
            closeBtn.addEventListener('click', () => modal.style.display = 'none');
            window.addEventListener('click', (e) => {
                if (e.target === modal) modal.style.display = 'none';
            });

            // Form Handling
            const form = document.getElementById('app-submit-form');
            const shortDesc = document.getElementById('short-desc');
            const fullDesc = document.getElementById('full-desc');
            const shortDescCount = document.getElementById('short-desc-count');
            const fullDescCount = document.getElementById('full-desc-count');
            const logoInput = document.getElementById('app-logo');
            const imagesInput = document.getElementById('app-images');
            const logoPreview = document.getElementById('logo-preview');
            const imagesPreview = document.getElementById('images-preview');
            const urlGroup = document.getElementById('url-group');
            const apkGroup = document.getElementById('apk-group');
            const urlRadio = document.getElementById('url');
            const apkRadio = document.getElementById('apk');

            shortDesc.addEventListener('input', () => shortDescCount.textContent = `${shortDesc.value.length}/100`);
            fullDesc.addEventListener('input', () => fullDescCount.textContent = `${fullDesc.value.length}/400`);

            logoInput.addEventListener('change', () => previewImage(logoInput, logoPreview, true));
            imagesInput.addEventListener('change', () => previewImages(imagesInput, imagesPreview));

            urlRadio.addEventListener('change', () => {
                urlGroup.style.display = 'block';
                apkGroup.style.display = 'none';
            });
            apkRadio.addEventListener('change', () => {
                urlGroup.style.display = 'none';
                apkGroup.style.display = 'block';
            });

            function previewImage(input, preview, isLogo = false) {
                const file = input.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        preview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                        if (isLogo) validateLogo(file);
                    };
                    reader.readAsDataURL(file);
                }
            }

            function previewImages(input, preview) {
                preview.innerHTML = '';
                const files = Array.from(input.files).slice(0, 5);
                files.forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            const ratio = img.width / img.height;
                            const isValidRatio = ratio === 16/9 || ratio === 9/16;
                            const div = document.createElement('div');
                            div.className = `image-preview-item ${isValidRatio && ratio < 1 ? 'portrait' : ''}`;
                            div.innerHTML = `<img src="${e.target.result}" alt="Preview ${index + 1}">
                                            <span class="remove-image" onclick="this.parentElement.remove()">&times;</span>`;
                            preview.appendChild(div);
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                });
            }

            async function validateForm() {
                const logoFile = logoInput.files[0];
                if (!logoFile) {
                    alert('Please upload a logo.');
                    return false;
                }
                const logoValid = await validateLogo(logoFile);
                if (!logoValid) return false;

                const imageFiles = imagesInput.files;
                if (imageFiles.length < 2) {
                    alert('Please upload at least 2 images.');
                    return false;
                }
                for (let file of imageFiles) {
                    const valid = await validateImage(file);
                    if (!valid) return false;
                }
                return true;
            }

            async function validateLogo(file) {
                const img = await loadImage(file);
                if (img.width !== img.height) {
                    alert('Logo must be square.');
                    return false;
                }
                return true;
            }

            async function validateImage(file) {
                const img = await loadImage(file);
                const ratio = img.width / img.height;
                if (ratio !== 16/9 && ratio !== 9/16) {
                    alert('Images must be in 16:9 or 9:16 ratio.');
                    return false;
                }
                return true;
            }

            function loadImage(file) {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => resolve(img);
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                });
            }

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                if (await validateForm()) {
                    const formData = new FormData(form);
                    try {
                        const response = await fetch('/submit-app', {
                            method: 'POST',
                            body: formData,
                        });
                        if (response.ok) {
                            alert('App submitted successfully.');
                            modal.style.display = 'none';
                            form.reset();
                            logoPreview.innerHTML = '';
                            imagesPreview.innerHTML = '';
                            shortDescCount.textContent = '0/100';
                            fullDescCount.textContent = '0/400';
                        } else {
                            alert('Error submitting app.');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('Error submitting app.');
                    }
                }
            });

            // Scroll Animations
            const elements = document.querySelectorAll('.fade-in, .slide-up');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            elements.forEach(el => observer.observe(el));
        });
    </script>
</body>
</html>
